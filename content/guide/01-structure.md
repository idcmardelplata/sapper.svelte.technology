---
title: Sapper app structure
---

Esta sección es una referencia para los curiosos. Te recomendamos que juegues primero con la plantilla del proyecto, y vuelve aqui cuando tengas una idea de como encajan las cosas.

Si echas un vistazo dentro del repositorio de la [plantilla de sapper](https://github.com/sveltejs/sapper-template), vera algunos archivos que Sapper espera encontrar:

```bash
├ package.json
├ app
│ ├ manifest
│ │ ├ # files generated by Sapper
│ ├ client.js
│ ├ server.js
│ ├ service-worker.js
│ └ template.html
├ assets
│ ├ # your files here
├ routes
│ ├ # your routes here
│ ├ 4xx.html
│ └ 5xx.html
├ webpack
│ ├ client.config.js
│ ├ server.config.js
│ └ service-worker.config.js
```

Notara algunos archivos extra y un directorio `cypress` relativo al [testing](#testing) - no se preocupe de ellos por ahora.

> Puede *crear* estos archivos desde cero, pero es mucho mejor usar la plantilla. Vea [Comenzado](#getting-started) para obtener instrucciones sobre como clonarlo facilmente.


### package.json

Su package.json tienen las dependencias de su proyecto, incluido `sapper`, y define un numero de scripts: 

* `npm run dev` — inicia la aplicación en modo de desarrollo, y observa los archivos en busca de cambios
* `npm run build` — compila la aplicación en modo de producción
* `npm start` — inicia la aplicación en modo de producción luego de compilarla
* `npm test` — ejecuta los test (vea [testing](#testing))


### app

Este directorio contiene los tres *entry points* para su aplicación - `app/client.js`, `app/server.js` y (opcionalmente) `app/service-worker.js` - junto con un archivo `app/template.html`.

#### app/client.js

Esto *debe* importar y llamar a la función `init` de `sapper/runtime.js`, usando el objeto `routes` que Sapper genera:

```js
import { init } from 'sapper/runtime.js';
import { routes } from './manifest/client.js';

init(document.querySelector('#sapper'), routes);

if (module.hot) module.hot.accept(); // enable hot reloading
```

En muchos casos, esa sera la totalidad de su modulo de entrada, aunque puede hacer aqui tanto como desee. vea la sección [runtime API](#runtime-api) para obtener más información sobre las funciones que puede importar.

#### app/server.js

Esto es una aplicación Express (o [Polka](https://github.com/lukeed/polka), etc..), con dos requisitos:

* debe servir los contenidos de la carpeta `assets`, usando por ejemplo [serve-static](https://github.com/expressjs/serve-static)
* debe llamar a `app.use(sapper({ routes }))` al final, donde `routes` es importado desde `app/manifest/server.js`

Mas alla de eso, puede escribir el servidor como desee.


#### app/service-worker.js

Service workers act as proxy servers that give you fine-grained control over how to respond to network requests. For example, when the browser requests `/goats.jpg`, the service worker can respond with a file it previously cached, or it can pass the request on to the server, or it could even respond with something completely different, such as a picture of llamas.

Among other things, this makes it possible to build applications that work offline.

Because every app needs a slightly different service worker (sometimes it's appropriate to always serve from the cache, sometimes that should only be a last resort in case of no connectivity), Sapper doesn't attempt to control the service worker. Instead, you write the logic in `service-worker.js`. You can import any of the following from `app/manifest/service-worker.js`:

* `assets` — an array of files found in the `assets` directory
* `shell` — the client-side JavaScript generated by webpack
* `routes` — an array of `{ pattern: RegExp }` objects you can use to determine whether a Sapper-controlled page is being requested
* `timestamp` — the time the service worker was generated


#### app/template.html

This file is a template for responses from the server. Sapper will inject content that replaces the following tags:

* `%sapper.styles%` — critical CSS for the page being requested
* `%sapper.head%` — HTML representing page-specific `<head>` contents, like `<title>`
* `%sapper.html%` — HTML representing the body of the page being rendered
* `%sapper.scripts%` — script tags for the client-side app


### assets

This is a place to put any files that your app uses — fonts, images and so on. For example `assets/favicon.png` will be served as `/favicon.png`.

Sapper doesn't serve these assets — you'd typically use [serve-static](https://github.com/expressjs/serve-static) for that — but it will read the contents of the `assets` folder so that you can easily generate a cache manifest for offline support (see [service-worker.js](#templates-service-worker-js)).


### routes

This is the meat of your app — the pages and server routes. See the section on [routing](#routing) for the juicy details.


### webpack

Sapper uses [webpack](https://webpack.js.org/) to bundle your app. There are three config files, one for each entry point (the service worker is optional). You probably won't need to change the config, but if you want to (for example to add new loaders or plugins), you can.
