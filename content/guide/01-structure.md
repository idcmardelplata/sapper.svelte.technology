---
title: Sapper app structure
---

Esta sección es una referencia para los curiosos. Te recomendamos que juegues primero con la plantilla del proyecto, y vuelve aqui cuando tengas una idea de como encajan las cosas.

Si echas un vistazo dentro del repositorio de la [plantilla de sapper](https://github.com/sveltejs/sapper-template), vera algunos archivos que Sapper espera encontrar:

```bash
├ package.json
├ app
│ ├ manifest
│ │ ├ # files generated by Sapper
│ ├ client.js
│ ├ server.js
│ ├ service-worker.js
│ └ template.html
├ assets
│ ├ # your files here
├ routes
│ ├ # your routes here
│ ├ 4xx.html
│ └ 5xx.html
├ webpack
│ ├ client.config.js
│ ├ server.config.js
│ └ service-worker.config.js
```

Notara algunos archivos extra y un directorio `cypress` relativo al [testing](#testing) - no se preocupe de ellos por ahora.

> Puede *crear* estos archivos desde cero, pero es mucho mejor usar la plantilla. Vea [Comenzado](#getting-started) para obtener instrucciones sobre como clonarlo facilmente.


### package.json

Su package.json tienen las dependencias de su proyecto, incluido `sapper`, y define un numero de scripts: 

* `npm run dev` — inicia la aplicación en modo de desarrollo, y observa los archivos en busca de cambios
* `npm run build` — compila la aplicación en modo de producción
* `npm start` — inicia la aplicación en modo de producción luego de compilarla
* `npm test` — ejecuta los test (vea [testing](#testing))


### app

Este directorio contiene los tres *entry points* para su aplicación - `app/client.js`, `app/server.js` y (opcionalmente) `app/service-worker.js` - junto con un archivo `app/template.html`.

#### app/client.js

Esto *debe* importar y llamar a la función `init` de `sapper/runtime.js`, usando el objeto `routes` que Sapper genera:

```js
import { init } from 'sapper/runtime.js';
import { routes } from './manifest/client.js';

init(document.querySelector('#sapper'), routes);

if (module.hot) module.hot.accept(); // enable hot reloading
```

En muchos casos, esa sera la totalidad de su modulo de entrada, aunque puede hacer aqui tanto como desee. vea la sección [runtime API](#runtime-api) para obtener más información sobre las funciones que puede importar.

#### app/server.js

Esto es una aplicación Express (o [Polka](https://github.com/lukeed/polka), etc..), con dos requisitos:

* debe servir los contenidos de la carpeta `assets`, usando por ejemplo [serve-static](https://github.com/expressjs/serve-static)
* debe llamar a `app.use(sapper({ routes }))` al final, donde `routes` es importado desde `app/manifest/server.js`

Mas alla de eso, puede escribir el servidor como desee.


#### app/service-worker.js

Los workers actuan como servidores proxy que le brindan un control detallado sobre como responder a las solicitudes de la red. Por ejemplo, cuando el navegador solicita `/goats.jpg`, el worker puede responder con un archivo previamente guardado en la cache, o puede pasar la solicitud al servidor, o incluso podria responder con algo completamente diferente, como una imagen de llamas.

Entre otras cosas, esto hace posible que su aplicación trabaje de forma offline.

Como cada aplicación necesitara un service worker ligeramente diferente ( a veces es apropiado servir todo desde la cache, otras eso solo deberia ser un ultimo recurso en caso de que no haya conectividad), Sapper no intenta controlar el service worker. En cambio usted puede escribir la logica en `service-worker.js`. Puede importar cualquier de los siguientes desde `app/manifest/service-worker.js`:

* `assets` — un array con los archivos encontrados dentro del directorio `assets`
* `shell` — el JavaScript del lado del cliente generado por Webpack.
* `routes` — un array de objetos `{ pattern: RegExp }` que puede utilizar para determinar si se esta solicitando una página controlada por Sapper
* `timestamp` — La hora en la que el service worker ha sido generado.


#### app/template.html

Este archivo es un template para las respuestas del servidor. Sapper injectara contenido que reemplazara a las siguientes etiquetas:

* `%sapper.styles%` — CSS critico para la página solicitada.
* `%sapper.head%` — HTML que representa contenido especifico del `<head>` como  `<title>`
* `%sapper.html%` — HTML que representa el cuerpo de la pagina que se esta renderizando
* `%sapper.scripts%` — etiquetas de script para la aplicación del lado del cliente


### assets

Este es un lugar para colocar los archivos que utiliza tu aplicación  - como fuentes, imagenes etc... Por ejemplo  `assets/favicon.png` se servira como `/favicon.png`.

Sapper no sirve estos archivos - normalmente se usa [serve-static](https://github.com/expressjs/serve-static) para eso - pero leera el contenido de la carpeta `assets` para que pueda generar facilmente un manifiesto de cache para soporte offline (vea [service-worker.js](#templates-service-worker-js)).


### routes

Este es el centro de su aplicación - las páginas y las rutas del servidor. Vea la sección sobre [routing](#routing) para los detalles jugosos.

### webpack

Sapper uses [webpack](https://webpack.js.org/) to bundle your app. There are three config files, one for each entry point (the service worker is optional). You probably won't need to change the config, but if you want to (for example to add new loaders or plugins), you can.
